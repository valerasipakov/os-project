## План и результаты мануального тестирования

### 1.1. Тесты для `main.sh` (анализ тестов)

Общий формат запуска:  

```bash
./src/scripts/main.sh --group=<строка> --subject=<строка> [--test=<имя>] --action=<режим>
```

Обязательные флаги: `--group`, `--subject`, `--action`. Режимы `--action`: `max-correct`, `max-wrong`, `both`.

---

#### TC-1: Успешный анализ всех тестов по предмету (режим both)

**Цель:** проверить базовый позитивный сценарий без флага `--test` (используются все `TEST-*`).  

**Предусловия:**

- в данных есть группа, например `Ae-21-22`, и предмет `Цирковое_Дело`;
- каталог с тестами существует.

**Шаги:**

1. Выполнить команду:

   ```bash
   ./src/scripts/main.sh --group=Ae-21-22 --subject="Цирковое_Дело" --action=both
   ```

2. Наблюдать вывод в `stdout` и `stderr`.

**Ожидаемый результат:**

- В `stdout` выводится информация о студенте(ах) с максимальным числом **правильных** и **неправильных** ответов.

**Фактический результат:** 

- В `stdout` выводится информация о студенте(ах) с максимальным числом **правильных** и **неправильных** ответов.

**Скриншот:** 
<img width="1157" height="81" alt="тест1" src="https://github.com/user-attachments/assets/56523516-32b6-49a5-b5f4-49058815d95c" />

---

#### TC-2: Анализ конкретного теста (`--test=TEST-1`)

**Цель:** проверить работу флага `--test` для анализа одного файла.  

**Шаги:**

```bash
./src/scripts/main.sh \
  --group=Ae-21-22 \
  --subject="Цирковое_Дело" \
  --test=TEST-1 \
  --action=max-correct
```

**Ожидаемый результат:**

- В `stdout` — студент(ы) с максимальным числом правильных ответов только по `TEST-1`.


**Фактический результат:**  

- В `stdout` — студент(ы) с максимальным числом правильных ответов только по `TEST-1`.

**Скриншот:**
<img width="1053" height="117" alt="тест2" src="https://github.com/user-attachments/assets/528a95ee-3b4e-410f-b5b8-c503d8dcd33b" />

---

#### TC-3: Проверка режима `max-wrong`

**Цель:** убедиться, что при `--action=max-wrong` выводятся студенты с максимумом неправильных ответов.  

**Шаги:**

```bash
./src/scripts/main.sh \
  --group=Ae-21-22 \
  --subject="Поп-Культуроведение" \
  --action=max-wrong
```

**Ожидаемый результат:**

- В `stdout` — студент(ы) с максимальным числом **неправильных** ответов по всем тестам предмета.

**Фактический результат:**  

- В `stdout` — студент(ы) с максимальным числом **неправильных** ответов по всем тестам предмета.
  
**Скриншот:**

<img width="796" height="101" alt="тест3" src="https://github.com/user-attachments/assets/960dc58b-60ce-4fd3-97d0-5313364969dc" />

---

#### TC-4: Обрезка пробелов у флага `--group`

**Цель:** проверить автоматическое обрезание пробелов по краям значения `--group`.  

**Шаги:**

```bash
./src/scripts/main.sh \
  --group="  Ae-21-22  " \
  --subject="Цирковое_Дело" \
  --action=both
```

**Ожидаемый результат:**

- Скрипт корректно воспринимает группу `Ae-21-22`, несмотря на пробелы.
- Результаты совпадают с запуском из TC-1.

**Фактический результат:**  

- Скрипт корректно воспринимает группу `Ae-21-22`, несмотря на пробелы.
- Результаты совпадают с запуском из TC-1.

**Скриншот:**

<img width="817" height="125" alt="тест4" src="https://github.com/user-attachments/assets/28ae65c3-d992-450e-a31f-46474af748b1" />

---

#### TC-5: Отсутствие обязательного флага `--group`

**Цель:** проверить поведение при пропуске обязательного флага и сообщение об ошибке.  

**Шаги:**

```bash
./src/scripts/main.sh \
  --subject="Цирковое_Дело" \
  --action=both
```

**Ожидаемый результат:**

- В `stderr` сообщение вида `Необходимо указать флаг --group` + краткая справка по использованию.

**Фактический результат:**  

- В `stderr` сообщение вида `Необходимо указать флаг --group` + краткая справка по использованию.

**Скриншот:**

<img width="817" height="125" alt="тест5" src="https://github.com/user-attachments/assets/190fda0a-5636-4d95-b7e5-59f948fcdf78" />

---

#### TC-6: Не существующий файл теста

**Цель:** проверить обработку некорректного значения `--test`.  

**Шаги:**

```bash
./src/scripts/main.sh \
  --group=Ae-21-22 \
  --subject="Цирковое_Дело" \
  --test=TEST-999 \
  --action=both
```

**Ожидаемый результат:**

- В `stderr` сообщение об отсутствии файла теста.

**Фактический результат:**  

- В `stderr` сообщение об отсутствии файла теста.

**Скриншот:**

<img width="817" height="125" alt="тест6" src="https://github.com/user-attachments/assets/1bd2c46c-61a6-4bac-bb19-2448bb680056" />

---

#### TC-7: Группа отсутствует в тестах выбранного предмета

**Цель:** проверить вывод списка доступных групп при отсутствии указанной группы.  

**Шаги:**

```bash
./src/scripts/main.sh \
  --group=NoSuchGroup \
  --subject="Цирковое_Дело" \
  --action=both
```

**Ожидаемый результат:**

- В `stderr` сообщение об отсутствии группы + список доступных групп.

**Фактический результат:**  

- В `stderr` сообщение об отсутствии группы + список доступных групп.
  
**Скриншот:**

<img width="593" height="629" alt="тест7" src="https://github.com/user-attachments/assets/818a2a7c-b943-40b4-b206-524b3ac8f3c5" />

---

#### TC-8: Некорректное значение `--subject`

**Цель:** проверить реакцию на предмет, не предусмотренный документацией.  

**Шаги:**

```bash
./src/scripts/main.sh \
  --group=Ae-21-22 \
  --subject="Математика" \
  --action=both
```

**Ожидаемый результат (ожидаемое поведение):**

- Скрипт сообщает об ошибке.
- Никаких валидных результатов анализа.

**Фактический результат:**  

- Скрипт сообщает об ошибке.
- Никаких валидных результатов анализа.

**Скриншот:**

<img width="611" height="96" alt="тест8" src="https://github.com/user-attachments/assets/0de0fbd3-1444-4561-b397-9552c040d0ae" />

---

### 1.2. Тесты для `student_notes.sh` (досье студентов)

Функциональность:  
- вывод досье по фамилии (позиционный аргумент);  
- добавление записи при флаге `--add`.  

Файлы досье: в `{LAB_ROOT}/students/general/notes` или, при отсутствии каталога `notes`, в `{LAB_ROOT}/students/general`.  

---

#### TC-9: Просмотр существующего досье

**Цель:** проверить корректный поиск и вывод досье.

**Шаги:**

```bash
./src/scripts/student_notes.sh RusinAN
```

**Ожидаемый результат:**

- В `stdout` строка вида:

  ```text
  Досье студента RusinAN: <текст досье одной строкой, фразы через пробел>.
  ```

- Все строки блока досье (между `====`) объединены через пробел.  

**Фактический результат:**  

- В `stdout` строка вида:

  ```text
  Досье студента RusinAN: <текст досье одной строкой, фразы через пробел>.
  ```

- Все строки блока досье (между `====`) объединены через пробел.

**Скриншот:**

<img width="1828" height="42" alt="тест9" src="https://github.com/user-attachments/assets/1b2fae17-932c-45aa-84f6-199de1d270a7" />

---

#### TC-10: Добавление новой записи в досье (`--add`)

**Цель:** убедиться, что новая запись добавляется перед нижней линией `====` и отображается при последующем просмотре.  

**Шаги:**

1. Выполнить:

   ```bash
   ./src/scripts/student_notes.sh RusinAN --add
   ```

2. В ответ на приглашение:

   ```text
   Введите новую запись:
   >
   ```

   ввести, например: `Tset 123 123 123 123` и нажать Enter.

3. Снова выполнить просмотр:

   ```bash
   ./src/scripts/student_notes.sh RusinAN
   ```

**Ожидаемый результат:**


- В файле досье новая строка добавлена **перед** нижней линией `====`.
- В итоговой строке просмотра новая фраза присутствует в конце текста.

**Фактический результат:**  

- В файле досье новая строка добавлена **перед** нижней линией `====`.
- В итоговой строке просмотра новая фраза присутствует в конце текста.

**Скриншот:**

<img width="2052" height="100" alt="тест10" src="https://github.com/user-attachments/assets/5a740c56-e28e-47a9-a0b0-237eeca501aa" />

---


#### TC-11: Несуществующий студент

**Цель:** проверить обработку отсутствующего блока досье.

**Шаги:**

```bash
./src/scripts/student_notes.sh NoSuchStudent
```

**Ожидаемый результат (ожидаемое поведение):**

- Сообщение об отсутствии досье.

**Фактический результат:**  

- Сообщение об отсутствии досье.

**Скриншот:**

<img width="273" height="33" alt="test11" src="https://github.com/user-attachments/assets/4be9cc2d-9398-4644-8e32-4f07e8ef168d" />

---

### 1.3. Тесты для `avg_score.sh` (средняя оценка по предмету)

Функциональность: вычисление средней оценки по предмету и студенту с учётом всех попыток, игнорируя знаки `+` и `-` в оценках.  

Формат запуска:  

```bash
./src/scripts/avg_score.sh <ФамилияИО> <Предмет>
```

Используются все файлы `TEST-*` в `{LAB_ROOT}/{subject}/tests/`.  

---

#### TC-12: Успешный расчёт средней оценки

**Цель:** проверить основной сценарий подсчёта средней оценки и формат вывода.  

**Шаги:**

```bash
./src/scripts/avg_score.sh RusinAN "Цирковое_Дело"
```

**Ожидаемый результат:**

- Код возврата `0`.
- В `stdout` строка вида:

  ```text
  Средняя оценка студента RusinAN по предмету Цирковое_Дело: X.XX
  ```

  где `X.XX` – число с **точностью до двух знаков** после запятой.
- Используются все оценки студента по всем `TEST-*` в каталоге предмета.

**Фактический результат:**  

- Код возврата `0`.
- В `stdout` строка вида:

  ```text
  Средняя оценка студента RusinAN по предмету Цирковое_Дело: X.XX
  ```

  где `X.XX` – число с **точностью до двух знаков** после запятой.
- Используются все оценки студента по всем `TEST-*` в каталоге предмета.

**Скриншот:**

<img width="369" height="41" alt="test12" src="https://github.com/user-attachments/assets/9c1134f5-84da-4faf-88fe-8c7eba6390ac" />

---

#### TC-13: Учёт оценок со знаками `+` и `-`

**Цель:** убедиться, что знаки `+` и `-` игнорируются (`5+` → `5`, `4-` → `4`).  

**Шаги:**

1. Найти в данных предмет/студента, где есть оценки со знаками `+` или `-`.
2. Выполнить:

   ```bash
   ./src/scripts/avg_score.sh <ФамилияИО> "<Предмет>"
   ```

3. При необходимости вручную пересчитать среднее, убрав знаки.

**Ожидаемый результат:**

- Среднее значение совпадает с ручным расчётом без учёта `+` и `-`.
- Формат вывода аналогичен TC-12.

**Фактический результат:**  

- Среднее значение совпадает с ручным расчётом без учёта `+` и `-`.
- Формат вывода аналогичен TC-12.

**Скриншот:**

<img width="960" height="100" alt="test13" src="https://github.com/user-attachments/assets/8ac0c6b3-b493-4584-9323-855ccc691e4c" />

---

#### TC-14: Отсутствие оценок по предмету для студента

**Цель:** проверить сообщение о том, что оценки не найдены.  

**Шаги:**

```bash
./src/scripts/avg_score.sh NoSuchStudent "Цирковое_Дело"
```

**Ожидаемый результат:**

- В `stdout` сообщение:

  ```text
  Оценки студента NoSuchStudent по предмету Цирковое_Дело не найдены
  ```


**Фактический результат:**  

- В `stdout` сообщение:

  ```text
  Оценки студента NoSuchStudent по предмету Цирковое_Дело не найдены
  ```

**Скриншот:**

<img width="377" height="40" alt="test14" src="https://github.com/user-attachments/assets/60ad54b3-eaee-4e6f-963b-b39c24cbaa0f" />

---

## 2. Запуск unit-тестов

В проекте существуют unit-тесты, проверяющие базовые положительные сценарии, их можно запускать через `pytest` или docker.
-

#### TC-15: Запуск unit-тестов через pytest

**Шаги:**

```bash
src/tests/run_test.sh
```

**Ожидаемый результат:**

- Все тесты проходят, в конце выводится `TESTS PASSED` (или эквивалент успешного прохождения).

**Фактический результат:**  
- Все тесты проходят, в конце выводится `TESTS PASSED`
**Скриншот:**
  
<img width="1093" height="85" alt="unit-tests" src="https://github.com/user-attachments/assets/b2a34c9a-4380-45af-b592-d8433c8be61a" />

---

#### TC-16: Запуск unit-тестов через Docker

**Шаги:**

```bash
docker build -t mytests .
docker run --rm --name mytests-run mytests
```

**Ожидаемый результат:**

- Все тесты проходят, в конце выводится `TESTS PASSED` (или эквивалент успешного прохождения).


**Фактический результат:**  
- Все тесты проходят, в конце выводится `TESTS PASSED`
**Скриншот:**
  
<img width="1096" height="465" alt="docker-tests" src="https://github.com/user-attachments/assets/c11a072c-650c-4e3e-870b-0269cf4c3ea2" />

---
## 3. Итоговый вывод

- Все тесты (16/16) пройдены

## Таблица с тест-кейсами
| TC # | Тест | Ожидаемый результат | Фактический результат | Скриншот |
|------|------|----------------------|-----------------------|----------|
| TC-1 | Успешный анализ всех тестов по предмету (режим both) | В stdout выводится информация о студенте(ах) с максимальным числом правильных и неправильных ответов. | В stdout выводится информация о студенте(ах) с максимальным числом правильных и неправильных ответов. | ![Тест1](https://github.com/user-attachments/assets/56523516-32b6-49a5-b5f4-49058815d95c) |
| TC-2 | Анализ конкретного теста (`--test=TEST-1`) | В stdout выводится студент(ы) с максимальным числом правильных ответов по `TEST-1`. | В stdout выводится студент(ы) с максимальным числом правильных ответов по `TEST-1`. | ![Тест2](https://github.com/user-attachments/assets/528a95ee-3b4e-410f-b5b8-c503d8dcd33b) |
| TC-3 | Проверка режима `max-wrong` | В stdout выводятся студент(ы) с максимальным числом неправильных ответов. | В stdout выводятся студент(ы) с максимальным числом неправильных ответов. | ![Тест3](https://github.com/user-attachments/assets/960dc58b-60ce-4fd3-97d0-5313364969dc) |
| TC-4 | Обрезка пробелов у флага `--group` | Скрипт корректно воспринимает группу `Ae-21-22`, несмотря на пробелы. | Скрипт корректно воспринимает группу `Ae-21-22`, несмотря на пробелы. | ![Тест4](https://github.com/user-attachments/assets/28ae65c3-d992-450e-a31f-46474af748b1) |
| TC-5 | Отсутствие обязательного флага `--group` | В stderr сообщение вида `Необходимо указать флаг --group`. | В stderr сообщение вида `Необходимо указать флаг --group`. | ![Тест5](https://github.com/user-attachments/assets/190fda0a-5636-4d95-b7e5-59f948fcdf78) |
| TC-6 | Не существующий файл теста | В stderr сообщение об отсутствии файла теста. | В stderr сообщение об отсутствии файла теста. | ![Тест6](https://github.com/user-attachments/assets/1bd2c46c-61a6-4bac-bb19-2448bb680056) |
| TC-7 | Группа отсутствует в тестах выбранного предмета | В stderr сообщение об отсутствии группы + список доступных групп. | В stderr сообщение об отсутствии группы + список доступных групп. | ![Тест7](https://github.com/user-attachments/assets/818a2a7c-b943-40b4-b206-524b3ac8f3c5) |
| TC-8 | Некорректное значение `--subject` | Скрипт сообщает об ошибке и не выводит валидных результатов. | Скрипт сообщает об ошибке и не выводит валидных результатов. | ![Тест8](https://github.com/user-attachments/assets/0de0fbd3-1444-4561-b397-9552c040d0ae) |
| TC-9 | Просмотр существующего досье | В stdout выводится строка вида: `Досье студента RusinAN: <текст досье>`. | В stdout выводится строка вида: `Досье студента RusinAN: <текст досье>`. | ![Тест9](https://github.com/user-attachments/assets/1b2fae17-932c-45aa-84f6-199de1d270a7) |
| TC-10 | Добавление новой записи в досье (`--add`) | В файле досье новая строка добавлена перед нижней линией `====`. | В файле досье новая строка добавлена перед нижней линией `====`. | ![Тест10](https://github.com/user-attachments/assets/5a740c56-e28e-47a9-a0b0-237eeca501aa) |
| TC-11 | Несуществующий студент | Сообщение об отсутствии досье. | Сообщение об отсутствии досье. | ![Тест11](https://github.com/user-attachments/assets/4be9cc2d-9398-4644-8e32-4f07e8ef168d) |
| TC-12 | Успешный расчёт средней оценки | В stdout строка вида: `Средняя оценка студента RusinAN по предмету Цирковое_Дело: X.XX`. | В stdout строка вида: `Средняя оценка студента RusinAN по предмету Цирковое_Дело: X.XX`. | ![Тест12](https://github.com/user-attachments/assets/9c1134f5-84da-4faf-88fe-8c7eba6390ac) |
| TC-13 | Учёт оценок со знаками `+` и `-` | Среднее значение совпадает с ручным расчётом без учёта `+` и `-`. | Среднее значение совпадает с ручным расчётом без учёта `+` и `-`. | ![Тест13](https://github.com/user-attachments/assets/8ac0c6b3-b493-4584-9323-855ccc691e4c) |
| TC-14 | Отсутствие оценок по предмету для студента | В stdout сообщение: `Оценки студента NoSuchStudent по предмету Цирковое_Дело не найдены`. | В stdout сообщение: `Оценки студента NoSuchStudent по предмету Цирковое_Дело не найдены`. | ![Тест14](https://github.com/user-attachments/assets/60ad54b3-eaee-4e6f-963b-b39c24cbaa0f) |
| TC-15 | Запуск unit-тестов через pytest | Все тесты проходят, в конце выводится `TESTS PASSED`. | Все тесты проходят, в конце выводится `TESTS PASSED`. | ![Unit-tests](https://github.com/user-attachments/assets/b2a34c9a-4380-45af-b592-d8433c8be61a) |
| TC-16 | Запуск unit-тестов через Docker | Все тесты проходят, в конце выводится `TESTS PASSED`. | Все тесты проходят, в конце выводится `TESTS PASSED`. | ![Docker-tests](https://github.com/user-attachments/assets/c11a072c-650c-4e3e-870b-0269cf4c3ea2) |
